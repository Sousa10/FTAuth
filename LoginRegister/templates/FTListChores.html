{% extends 'base.html' %}
{% load static %}

{% block title %}List & Chores{% endblock %}

{% block pageimage %}
<img style="float: left;" src="{% static 'ListChores.jpg' %}" alt="To Do'a Tile Missing" width="100" height="100">
{% endblock %}

{% block backurl %}{%url 'LoginRegister:FTMainMenu'%}{% endblock %}

{% block content %}
<div class="h1">
  <a style="color:rgb(6, 6, 192)">
    <p style="font-size:40px">
      <h2>List & Chores</h2>
    </p>
  </a>
</div>
<div class="row text-center">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <table style="border-bottom: none!important;">
      <thead>
        <tr>
          <th style="text-align: center;">List</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center; white-space: nowrap;">
            <!-- <a class="add-button" href="{% url 'LoginRegister:FTFinances' %}">Add</a> -->
            <a href="#" class="btn listheaderbuttons" data-bs-toggle="modal" data-bs-target="#listHeaderModal"
              style="border-radius: 0%;">New</a>
            <a href="#" class="btn edit-button listheaderbuttons"
              style="border-radius: 0%; margin: 0;">Existing</a>
          </td>
        </tr>
        <tr>
          <td colspan="3" class="text-center">
            <table style="margin-top: 0%;">
              <!-- <thead>
                <tr>
                  <th>List Header</th>
                  <th>Description</th>
                  <th>Actions</th>
                </tr>
              </thead> -->
              <tbody>
                {% for listheader in listheaders %}
                <tr>
                  <!-- <td>{{ listheader.LHName }}</td> -->
                  <td colspan="2">{{ listheader.LHDescription }}</td>
                  <td>
                    <!-- <a class="add-button" href="{% url 'LoginRegister:FTFinances' %}">Add</a> -->
                    <a href="{% url 'LoginRegister:listHeader_delete' listheader.id %}" class="btn btn-danger">Delete</a>
                    <a href="#" class="btn btn-secondary edit-button">Edit</a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
    <table style="margin-top: 0%;">
      <thead>
        <tr>
          <th style="text-align: center;">Details</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center; white-space: nowrap;">
            <table style="margin-top: 0%;">
              <thead>
                <tr>
                  <th>Item Number</th>
                  <th>Predecessor</th>
                  <th>Item</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for listdetail in listdetails %}
                <tr>
                  <td>{{ listdetail.LNNumber }}</td>
                  <td>{{ listdetail.ListDetailFK.LHName }}</td>
                  <td>{{ listdetail.LHName }}</td>
                  <td>
                    <!-- <a class="add-button" href="{% url 'LoginRegister:FTFinances' %}">Add</a> -->
                    <a href="{% url 'LoginRegister:listDetail_delete' listdetail.id %}" class="btn btn-danger">Delete</a>
                    <a href="#" class="btn btn-secondary edit-button">Edit</a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td colspan="3" class="text-center">
            <a class="add-button btn btn-primary listheaderbuttons" href="#" style="border-radius: 0%;"
              data-bs-toggle="modal" data-bs-target="#listDetailModal">Add</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-1">
  </div>

  <!-- List Header Modal -->
  <div class="modal fade" id="listHeaderModal" tabindex="-1" aria-labelledby="listHeaderModalLabel" aria-hidden="true"
    data-backdrop="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">{{ title }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <form action="{% url 'LoginRegister:FTListChores' %}" method="post">
          <div class="modal-body">
            {% csrf_token %}
            <div class="form-group">
              <label for="{{ form.AccountNumber.id_for_label }}">Header Name</label>
              {{ listHeaderForm.LHName }}
            </div>
            <div class="form-group">
              <label for="{{ form.Description.id_for_label }}">Description</label>
              {{ listHeaderForm.LHDescription }}
            </div>
            {% if listHeaderForm.errors or listHeaderForm.non_field_errors %}
            <div class="mb-3 p-6 bg-red-100 rounded-xl">
              {% for field in listHeaderForm %}
              {{ field.errors }}
              {% endfor %}

              {{ listHeaderForm.non_field_errors }}
            </div>
            {% endif %}
          </div>
          <div class="modal-footer">
            <input type="hidden" name="form_type" value="ListHeaderTForm">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- List Detail Modal -->
  <div class="modal fade" id="listDetailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true"
    data-backdrop="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">{{ title }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="{% url 'LoginRegister:FTListChores' %}" method="post">
            {% csrf_token %}
            <div class="form-group">
              <label for="{{ form.AccountNumber.id_for_label }}">List Header</label>
              {{ listDetailForm.ListHeaderFK }}
            </div>
            <div class="form-group">
              <label for="{{ form.AccountNumber.id_for_label }}">Predecessor</label>
              {{ listDetailForm.ListDetailFK }}
            </div>
            <div class="form-group">
              <label for="{{ form.AccountNumber.id_for_label }}">List Item Number</label>
              {{ listDetailForm.LNNumber }}
            </div>
            <div class="form-group">
              <label for="{{ form.AccountNumber.id_for_label }}">List Detail Name</label>
              {{ listDetailForm.LHName }}
            </div>
            <div class="form-group">
              <label for="{{ form.Description.id_for_label }}">Description</label>
              {{ listDetailForm.LHDescription }}
            </div>
            {% if listDetailForm.errors or listHeaderForm.non_field_errors %}
            <div class="mb-3 p-6 bg-red-100 rounded-xl">
              {% for field in listDetailForm %}
              {{ field.errors }}
              {% endfor %}

              {{ listDetailForm.non_field_errors }}
            </div>
            {% endif %}
        </div>
        <div class="modal-footer">
          <input type="hidden" name="form_type" value="ListDetailsTForm">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" name="ListDetailsTForm">Submit</button>
        </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Edit modal -->
  <div class="md-4">
    <div id="editModal" class="modal">
      <div class="modal-content">
        <span class="close">&times</span>

        <h2>{{ title }}</h2>
        <form id="editForm" action="." method="post">
          {% csrf_token %}
          <div class="form-group">
            <label for="{{ form.AccountNumber.id_for_label }}">Account Number</label>
            {{ form.AccountNumber }}
          </div>
          <div class="form-group">
            <label for="{{ form.Description.id_for_label }}">Description</label>
            {{ form.Description }}
          </div>
          {% if form.errors or form.non_field_errors %}
          <div class="mb-3 p-6 bg-red-100 rounded-xl">
            {% for field in form %}
            {{ field.errors }}
            {% endfor %}

            {{ form.non_field_errors }}
          </div>
          {% endif %}
          <button type="submit"
            class="mt-6 mb-6 py-4 px-8 text-lg bg-teal-500 hover:bg-teal-700 rounded-xl text-white">Submit</button>
        </form>

      </div>
    </div>
  </div>

</div>
{% endblock %}